<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Web App - Course Template</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../custom.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Benvenuti</a></li><li class="expanded "><a href="../01-base/index.html"><strong aria-hidden="true">2.</strong> Concetti base</a></li><li class="expanded "><a href="../01-base/01-types.html"><strong aria-hidden="true">3.</strong> Tipi</a></li><li class="expanded "><a href="../01-base/02-python.html"><strong aria-hidden="true">4.</strong> Python</a></li><li class="expanded "><a href="../01-base/03-webapp.html" class="active"><strong aria-hidden="true">5.</strong> Web App</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Course Template</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/wbigger/" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#creare-una-web-app-con-html5-e-python" id="creare-una-web-app-con-html5-e-python">Creare una web app con HTML5 e Python</a></h1>
<p>Anche se non √® un tipico metodo di insegnamento, vorrei collegarmi subito a quello che state studiando in TPSI quest'anno e creare una semplicissima applicazione con HTML e Python.</p>
<h2><a class="header" href="#caso-di-studio" id="caso-di-studio">Caso di studio</a></h2>
<p>Immaginiamo di voler gestire una biblioteca scolastica. Da un lato ci serve del codice che gira da qualche parte nel cloud che gestisce la biblioteca, ed una pagina web per poter visualizzare la lista dei libri.</p>
<p>Useremo Python per la prima parte (server), e HTML per la seconda parte (pagina web).</p>
<svg height='140' width='100%'>
<rect width='40%' height='100%' style='fill:rgb(0,0,0);stroke-width:3;stroke:rgb(0,0,0)'/>
<text x="15%" y="50%" font-size="30" text-anchor="middle" fill="white">
   HTML
   </text>
<rect width='40%' height='100%' style='fill:rgb(0,255,0);stroke-width:3;stroke:rgb(0,0,0)' x="60%"/>
<text x="75%" y="50%" font-size="30" text-anchor="middle" fill="white">
   Python
   </text>
</svg>
<h2><a class="header" href="#python" id="python">Python</a></h2>
<p>Immaginiamo in maniera veramente minimale che il nostro catalogo sia formato solo dal seguente file Python, a cui diamo il nome di <code>library.py</code>.</p>
<pre><code class="language-py"># library.py
catalogue = [&quot;Harry Potter e il calice di fuoco&quot;, &quot;Il rosso e il nero&quot;, &quot;Il piccolo principe&quot;]
</code></pre>
<p>Pi√π essenziale di cos√¨, si muore... eppure √® un codice valido e funzionante.</p>
<h3><a class="header" href="#web-server" id="web-server">Web server</a></h3>
<p>Per poterlo far comunicare con la pagina HTML per√≤, mi serve qualcuno che faccia da intermediario. Non posso infatti chiamare del codice Python direttamente dalla pagina web! Le pagine web possono infatti interagire unicamente tramite dei link, o pi√π precisamente degli URL, e noi ancora non abbiamo nulla del genere.</p>
<p>L'intermediario che mette in comunicazione pagina web e codice sul server si chiama, in modo non troppo sorprendente, <strong>web server</strong>. Vediamo come si fa su Python.</p>
<p>Esistono diverse librerie che forniscono un web server, noi in questo tutorial useremo <a href="https://www.palletsprojects.com/p/flask/">Flask</a>, che √® estremamente leggero e semplice da usare, anche se magari non ha tutte le funzionalit√† che offrono altre librerie.</p>
<p>Essendo una libreria esterna non di sistema, bisogna prima di tutto installarla. Come abbiamo visto, apriamo un terminale e scriviamo:</p>
<pre><code>pip3 install flask
</code></pre>
<p>et voil√†! La libreria √® installata e pronta all'uso.</p>
<p>Ora creiamo un nuovo file nel nostro progetto, che chiamiamo <code>app.py</code>. Attenzione: il nome deve essere esattamente questo, altrimenti non funziona tutto automagicamente üé©.</p>
<pre><code class="language-py">from flask import Flask
from library import catalogue
import json

app = Flask(&quot;marconi&quot;)

@app.route(&quot;/&quot;)
def data_book():
    return json.dumps(
        [book for book in full_catalogue]
        )
</code></pre>
<p>Vediamo cosa abbiamo fatto. Abbiamo importato <code>Flask</code> e il nostro catalogo dal file che abbiamo creato precedentemente. Importiamo anche la libreria di sistema <code>json</code>, che √® utile per convertire le variabili Python nel formato stringa JSON (vedi dopo. </p>
<p>La riga <code>app = Flask(&quot;marconi&quot;)</code> crea un web server e gli da il nome di &quot;marconi&quot; (potevamo mettere quello che preferivamo).</p>
<p>La riga <code>@app.route(&quot;/&quot;)</code> √® un'annotazione: sta ad indicare che la funzione successiva deve essere chiamata quando qualcuno prova ad accedere alla pagina web.</p>
<p>La funzione <code>data_book()</code> viene quindi chiamata quando interroghiamo il web server. Questa funzione ritorna il nostro catalogo in formato JSON.</p>
<h3><a class="header" href="#il-formato-json" id="il-formato-json">Il formato JSON</a></h3>
<p>Fate attenzione: <a href="https://www.json.org/">JSON</a> √® un formato per scambiarsi i dati tra macchine (machine-to-machine), ma che pu√≤ essere letto e scritto abbastanza facilmente anche dagli esseri umani. JSON quindi non √® un codice, o un'applicazione, o una libreria, ma √® un formato di stringa che permette alle macchine di comunicare fra loro in modo comprensibile. Volendo fare un paragone con la lingua umana, √® come la sintassi della frase: per capirsi le persone devono mettere nel corretto ordine soggetto, verbo e complementi, altrimenti non ci si capisce.</p>
<p>JSON usa le seguenti convenzioni:</p>
<ul>
<li>le parentesi graffe per definire gli oggetti</li>
<li>le parentesi quadre per le liste</li>
<li>la virgola per separare gli elementi di una lista</li>
<li>i due punti per definire le propriet√† di un oggetto</li>
</ul>
<p>Ad esempio, per definire una lista di due oggetti, ognuno con le propriet√† <code>title</code> e <code>author</code>, scriveremo:</p>
<pre><code class="language-json">[
    {
        &quot;title&quot;:&quot;Harry Potter e il calice di fuoco&quot;,
        &quot;author&quot;:&quot;J.K.Rowling&quot;
    },
    {
        &quot;title&quot;:&quot;Il rosso e il nero&quot;,
        &quot;author&quot;:&quot;Stendhal&quot;
    },
    {
        &quot;title&quot;:&quot;Il piccolo principe&quot;,
        &quot;author&quot;:&quot;Antoine de Saint-Exup√©ry&quot;
    }
]
</code></pre>
<p>Per generare o validare stringhe JSON, √® possibile usare servizi online come ad esempio <a href="https://jsonlint.com/?json=%5B%7B%22title%22:%22Harry%20Potter%20e%20il%20calice%20di%20fuoco%22,%22author%22:%22J.K.Rowling%22%7D,%7B%22title%22:%22Il%20rosso%20e%20il%20nero%22,%22author%22:%22Stendhal%22%7D,%7B%22title%22:%22Il%20piccolo%20principe%22,%22author%22:%22Antoine%20de%20Saint-Exup%C3%A9ry%22%7D%5D">JSON lint</a>.</p>
<h3><a class="header" href="#lanciare-il-web-server" id="lanciare-il-web-server">Lanciare il web server</a></h3>
<p>Per lanciare il web server, aprite un terminale nella cartella del vostro progetto e scrivete:</p>
<pre><code>python3 -m flask run
</code></pre>
<p>Se tutto va bene, vi dovrebbe comparire la scritta &quot;Running on http://127.0.0.1:5000/&quot;. Ecco quindi il link che ci serviva per far comunicare la pagina web con la nostra applicazione!</p>
<h2><a class="header" href="#html" id="html">HTML</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../01-base/02-python.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../01-base/02-python.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
